# AI Helper

**AI Helper** ‚Äî —Ü–µ RAG-—Å–∏—Å—Ç–µ–º–∞, —Ä–æ–∑—Ä–æ–±–ª–µ–Ω–∞ –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç—ñ–≤ —Ç–∞ –¥–æ—Å–ª—ñ–¥–Ω–∏–∫—ñ–≤. –ü—Ä–æ–µ–∫—Ç –¥–æ–∑–≤–æ–ª—è—î –∑–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞—Ç–∏ –Ω–∞–≤—á–∞–ª—å–Ω—ñ –º–∞—Ç–µ—Ä—ñ–∞–ª–∏ (PDF), —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –±–∞–∑—É –∑–Ω–∞–Ω—å —Ç–∞ –≤–∑–∞—î–º–æ–¥—ñ—è—Ç–∏ –∑ –Ω–µ—é –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –®–Ü –¥–ª—è –≥–ª–∏–±–æ–∫–æ–≥–æ –∞–Ω–∞–ª—ñ–∑—É, —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–µ—Å—Ç—ñ–≤, –≤–∏–¥—ñ–ª–µ–Ω–Ω—è –∫–ª—é—á–æ–≤–∏—Ö –º–æ–º–µ–Ω—Ç—ñ–≤, —Ç–∞ —Ä–æ–∑—É–º–Ω–æ–≥–æ –ø–æ—à—É–∫—É.

## üöÄ –û—Å–Ω–æ–≤–Ω—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ

* **Smart RAG Chat**: –ß–∞—Ç —ñ–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏, —è–∫–∏–π –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –≥—ñ–±—Ä–∏–¥–Ω–∏–π –ø–æ—à—É–∫ (Vector + Keyword) –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ—ó —Ç–æ—á–Ω–æ—Å—Ç—ñ.
* **Study Tools**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è –¥–µ—Ç–∞–ª—å–Ω–∏—Ö –∫–æ–Ω—Å–ø–µ–∫—Ç—ñ–≤ (Summaries), –∫–ª—é—á–æ–≤–∏—Ö —Ç–µ–∑ (Key Points) —Ç–∞ –µ–∫–∑–∞–º–µ–Ω–∞—Ü—ñ–π–Ω–∏—Ö –ø–∏—Ç–∞–Ω—å —Ä—ñ–∑–Ω–æ—ó —Å–∫–ª–∞–¥–Ω–æ—Å—Ç—ñ.
* **Hybrid Search & RRF**: –ü–æ—î–¥–Ω–∞–Ω–Ω—è —Å–µ–º–∞–Ω—Ç–∏—á–Ω–æ–≥–æ –ø–æ—à—É–∫—É —á–µ—Ä–µ–∑ `pgvector` —Ç–∞ –ø–æ–≤–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –ø–æ—à—É–∫—É Postgres (`TSVECTOR`) –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –∞–ª–≥–æ—Ä–∏—Ç–º—É Reciprocal Rank Fusion (RRF).
* **Multi-tenant Architecture**: –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ –º–æ–∂—É—Ç—å —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –æ–∫—Ä–µ–º—ñ –ø—Ä–æ–µ–∫—Ç–∏ –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö –¥–∏—Å—Ü–∏–ø–ª—ñ–Ω, –∫–æ–∂–µ–Ω —ñ–∑ –≤–ª–∞—Å–Ω–∏–º –Ω–∞–±–æ—Ä–æ–º –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤ —Ç–∞ —ñ—Å—Ç–æ—Ä—ñ—î—é —á–∞—Ç—É.
* **Persistent Caching**: –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –≤–∞–∂–∫–∏—Ö AI-–∑–∞–ø–∏—Ç—ñ–≤ –∫–µ—à—É—é—Ç—å—Å—è –≤ –±–∞–∑—ñ –¥–∞–Ω–∏—Ö (JSONB/Text) –Ω–∞ –æ—Å–Ω–æ–≤—ñ —Ö–µ—à—É–≤–∞–Ω–Ω—è –∫–æ–Ω—Ç–µ–Ω—Ç—É, —â–æ –µ–∫–æ–Ω–æ–º–∏—Ç—å —á–∞—Å —Ç–∞ —Ä–µ—Å—É—Ä—Å–∏.
* **Fully Asynchronous Architecture**: –í–µ—Å—å –±–µ–∫–µ–Ω–¥ –ø–æ–±—É–¥–æ–≤–∞–Ω–∏–π –Ω–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∏—Ö –ø—Ä–∏–Ω—Ü–∏–ø–∞—Ö (`async/await`), —â–æ –∑–∞–±–µ–∑–ø–µ—á—É—î –≤–∏—Å–æ–∫—É –ø—Ä–æ–ø—É—Å–∫–Ω—É –∑–¥–∞—Ç–Ω—ñ—Å—Ç—å –ø—Ä–∏ –æ–¥–Ω–æ—á–∞—Å–Ω—ñ–π –æ–±—Ä–æ–±—Ü—ñ –±–∞–≥–∞—Ç—å–æ—Ö –∑–∞–ø–∏—Ç—ñ–≤ –¥–æ LLM —Ç–∞ –ë–î.

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—á–Ω–∏–π —Å—Ç–µ–∫

* **Backend**: FastAPI (Python 3.11.9).
* **Asynchronous Stack**: –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è **FastAPI, SQLAlchemy (Async Engine)** —Ç–∞ **asyncpg** –¥–ª—è –Ω–µ–±–ª–æ–∫—É—é—á–æ—ó –≤–∑–∞—î–º–æ–¥—ñ—ó –∑ –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö.
* **AI Models**: Google Gemini 2.5-flash (–¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó).
* **Database**: PostgreSQL + **pgvector** (–≤–µ–∫—Ç–æ—Ä–Ω–µ —Å—Ö–æ–≤–∏—â–µ).
* **Migrations**: Alembic.
* **Secure Authentication**: JWT (Access & Refresh tokens). `Access token` –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó –∑–∞–ø–∏—Ç—ñ–≤, –∞ `Refresh token` –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –≤ **HttpOnly, Secure Cookie** –¥–ª—è –∑–∞–ø–æ–±—ñ–≥–∞–Ω–Ω—è XSS-–∞—Ç–∞–∫–∞–º —Ç–∞ –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è —Ç—Ä–∏–≤–∞–ª–∏—Ö —Å–µ—Å—ñ–π.
* **Containerization**: Docker & Docker Compose. 
* **Observability**: LangSmith (—ñ–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω–æ –¥–ª—è —Ç—Ä–µ–π—Å–∏–Ω–≥—É –®–Ü-–ø–∞–π–ø–ª–∞–π–Ω—ñ–≤).
* **Hybrid Search Implementation**: –°–∏—Å—Ç–µ–º–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î `L2 distance` –¥–ª—è –≤–µ–∫—Ç–æ—Ä–Ω–æ–≥–æ –ø–æ—à—É–∫—É —á–µ—Ä–µ–∑ `pgvector` —Ç–∞ `GIN index` –∑ `tsvector` –¥–ª—è –∫–ª—é—á–æ–≤–∏—Ö —Å–ª—ñ–≤. –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –æ–±'—î–¥–Ω—É—é—Ç—å—Å—è –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –∞–ª–≥–æ—Ä–∏—Ç–º—É **Reciprocal Rank Fusion (RRF)**.

## üèó –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

–ü—Ä–æ–µ–∫—Ç –ø–æ–±—É–¥–æ–≤–∞–Ω–∏–π –∑–∞ –º–æ–¥—É–ª—å–Ω–∏–º –ø—Ä–∏–Ω—Ü–∏–ø–æ–º:

```text
app/
‚îú‚îÄ‚îÄ api/            # API –ï–Ω–¥–ø–æ—ñ–Ω—Ç–∏ (Auth, Projects, Documents, Chat, Study)
‚îú‚îÄ‚îÄ core/           # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó, –±–µ–∑–ø–µ–∫–∞, –ë–î —Ç–∞ –ø—Ä–æ–º–ø—Ç–∏
‚îú‚îÄ‚îÄ crud/           # –õ–æ–≥—ñ–∫–∞ –ø—Ä—è–º–æ—ó –≤–∑–∞—î–º–æ–¥—ñ—ó –∑ –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö
‚îú‚îÄ‚îÄ models/         # SQLAlchemy –º–æ–¥–µ–ª—ñ (Users, Docs, Chunks, Analysis)
‚îú‚îÄ‚îÄ schemas/        # Pydantic –º–æ–¥–µ–ª—ñ –¥–ª—è –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó –¥–∞–Ω–∏—Ö
‚îî‚îÄ‚îÄ services/       # –ë—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∞ (RAG, PDF parsing, AI Orchestration)
```

## ‚öôÔ∏è –®–≤–∏–¥–∫–∏–π –∑–∞–ø—É—Å–∫ (Docker)

* **–ö–ª–æ–Ω—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π.

* **–°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª .env –Ω–∞ –æ—Å–Ω–æ–≤—ñ –≤–∞—à–æ—ó –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó:

```
POSTGRES_USER=your_user
POSTGRES_PASSWORD=your_password
POSTGRES_DB=ai_helper
DATABASE_URL=postgresql://your_user:your_password@db:5432/ai_project_db
GEMINI_API_KEY=your_gemini_key
SECRET_KEY=your_jwt_secret

LANGSMITH_TRACING=true
LANGSMITH_ENDPOINT=https://api.smith.langchain.com
LANGSMITH_API_KEY=your_langsmith_key
LANGSMITH_PROJECT="AIhelper"
```
* **–ó–∞–ø—É—Å—Ç—ñ—Ç—å –ø—Ä–æ–µ–∫—Ç –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é Docker Compose:
```
docker-compose up --build
```

* **–ó–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è –º—ñ–≥—Ä–∞—Ü—ñ–π (Alembic):
–ü—ñ—Å–ª—è –∑–∞–ø—É—Å–∫—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤ –≤–∏–∫–æ–Ω–∞–π—Ç–µ –∫–æ–º–∞–Ω–¥—É –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–∞–±–ª–∏—Ü—å:
```
docker-compose exec api alembic upgrade head
```
* **Swagger**: –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `http://localhost:8000/docs` –¥–ª—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Å–µ—Ä–≤—ñ—Å—É
